import { AccAddress } from '@terra-money/terra.js';
const STORAGE_KEY = '__terra-readonly-wallet-storage-key__';
export function getStoredSession() {
    const storedSessionString = localStorage.getItem(STORAGE_KEY);
    if (!storedSessionString)
        return undefined;
    try {
        const storedSession = JSON.parse(storedSessionString);
        if ('terraAddress' in storedSession &&
            'network' in storedSession &&
            typeof storedSession['terraAddress'] === 'string' &&
            AccAddress.validate(storedSession.terraAddress)) {
            return storedSession;
        }
        else {
            localStorage.removeItem(STORAGE_KEY);
            return undefined;
        }
    }
    catch (_a) {
        localStorage.removeItem(STORAGE_KEY);
        return undefined;
    }
}
export function storeSession(session) {
    if (!AccAddress.validate(session.terraAddress)) {
        throw new Error(`${session.terraAddress} is not a terraAddress`);
    }
    localStorage.setItem(STORAGE_KEY, JSON.stringify(session));
}
export function clearStoredSession() {
    localStorage.removeItem(STORAGE_KEY);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RvcmFnZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9AdGVycmEtZGV2L3JlYWRvbmx5LXdhbGxldC9zdG9yYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUduRCxNQUFNLFdBQVcsR0FBRyx1Q0FBdUMsQ0FBQztBQUU1RCxNQUFNLFVBQVUsZ0JBQWdCO0lBQzlCLE1BQU0sbUJBQW1CLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUU5RCxJQUFJLENBQUMsbUJBQW1CO1FBQUUsT0FBTyxTQUFTLENBQUM7SUFFM0MsSUFBSTtRQUNGLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUV0RCxJQUNFLGNBQWMsSUFBSSxhQUFhO1lBQy9CLFNBQVMsSUFBSSxhQUFhO1lBQzFCLE9BQU8sYUFBYSxDQUFDLGNBQWMsQ0FBQyxLQUFLLFFBQVE7WUFDakQsVUFBVSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLEVBQy9DO1lBQ0EsT0FBTyxhQUFhLENBQUM7U0FDdEI7YUFBTTtZQUNMLFlBQVksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDckMsT0FBTyxTQUFTLENBQUM7U0FDbEI7S0FDRjtJQUFDLFdBQU07UUFDTixZQUFZLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3JDLE9BQU8sU0FBUyxDQUFDO0tBQ2xCO0FBQ0gsQ0FBQztBQUVELE1BQU0sVUFBVSxZQUFZLENBQUMsT0FBOEI7SUFDekQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUFFO1FBQzlDLE1BQU0sSUFBSSxLQUFLLENBQUMsR0FBRyxPQUFPLENBQUMsWUFBWSx3QkFBd0IsQ0FBQyxDQUFDO0tBQ2xFO0lBQ0QsWUFBWSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQzdELENBQUM7QUFFRCxNQUFNLFVBQVUsa0JBQWtCO0lBQ2hDLFlBQVksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDdkMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFjY0FkZHJlc3MgfSBmcm9tICdAdGVycmEtbW9uZXkvdGVycmEuanMnO1xuaW1wb3J0IHsgUmVhZG9ubHlXYWxsZXRTZXNzaW9uIH0gZnJvbSAnLi90eXBlcyc7XG5cbmNvbnN0IFNUT1JBR0VfS0VZID0gJ19fdGVycmEtcmVhZG9ubHktd2FsbGV0LXN0b3JhZ2Uta2V5X18nO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RvcmVkU2Vzc2lvbigpOiBSZWFkb25seVdhbGxldFNlc3Npb24gfCB1bmRlZmluZWQge1xuICBjb25zdCBzdG9yZWRTZXNzaW9uU3RyaW5nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oU1RPUkFHRV9LRVkpO1xuXG4gIGlmICghc3RvcmVkU2Vzc2lvblN0cmluZykgcmV0dXJuIHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGNvbnN0IHN0b3JlZFNlc3Npb24gPSBKU09OLnBhcnNlKHN0b3JlZFNlc3Npb25TdHJpbmcpO1xuXG4gICAgaWYgKFxuICAgICAgJ3RlcnJhQWRkcmVzcycgaW4gc3RvcmVkU2Vzc2lvbiAmJlxuICAgICAgJ25ldHdvcmsnIGluIHN0b3JlZFNlc3Npb24gJiZcbiAgICAgIHR5cGVvZiBzdG9yZWRTZXNzaW9uWyd0ZXJyYUFkZHJlc3MnXSA9PT0gJ3N0cmluZycgJiZcbiAgICAgIEFjY0FkZHJlc3MudmFsaWRhdGUoc3RvcmVkU2Vzc2lvbi50ZXJyYUFkZHJlc3MpXG4gICAgKSB7XG4gICAgICByZXR1cm4gc3RvcmVkU2Vzc2lvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9LRVkpO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH0gY2F0Y2gge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfS0VZKTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZVNlc3Npb24oc2Vzc2lvbjogUmVhZG9ubHlXYWxsZXRTZXNzaW9uKSB7XG4gIGlmICghQWNjQWRkcmVzcy52YWxpZGF0ZShzZXNzaW9uLnRlcnJhQWRkcmVzcykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7c2Vzc2lvbi50ZXJyYUFkZHJlc3N9IGlzIG5vdCBhIHRlcnJhQWRkcmVzc2ApO1xuICB9XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeShzZXNzaW9uKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclN0b3JlZFNlc3Npb24oKSB7XG4gIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfS0VZKTtcbn1cbiJdfQ==