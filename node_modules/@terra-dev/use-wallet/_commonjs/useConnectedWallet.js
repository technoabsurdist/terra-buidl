"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useConnectedWallet = void 0;
const terra_js_1 = require("@terra-money/terra.js");
const react_1 = require("react");
const types_1 = require("./types");
const useWallet_1 = require("./useWallet");
function useConnectedWallet() {
    const { status, network, wallets, post, sign } = (0, useWallet_1.useWallet)();
    const value = (0, react_1.useMemo)(() => {
        try {
            if (status === types_1.WalletStatus.WALLET_CONNECTED &&
                wallets.length > 0 &&
                terra_js_1.AccAddress.validate(wallets[0].terraAddress)) {
                const { terraAddress, connectType, design } = wallets[0];
                return {
                    network,
                    terraAddress: terraAddress,
                    walletAddress: terraAddress,
                    design,
                    post: (tx) => {
                        return post(tx, { terraAddress });
                    },
                    sign: (tx) => {
                        return sign(tx, { terraAddress });
                    },
                    availablePost: connectType === types_1.ConnectType.WEB_CONNECT ||
                        connectType === types_1.ConnectType.CHROME_EXTENSION ||
                        connectType === types_1.ConnectType.WALLETCONNECT,
                    availableSign: connectType === types_1.ConnectType.CHROME_EXTENSION,
                    connectType,
                };
            }
            else {
                return undefined;
            }
        }
        catch (_a) {
            return undefined;
        }
    }, [network, post, sign, status, wallets]);
    return value;
}
exports.useConnectedWallet = useConnectedWallet;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlQ29ubmVjdGVkV2FsbGV0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL0B0ZXJyYS1kZXYvdXNlLXdhbGxldC91c2VDb25uZWN0ZWRXYWxsZXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0Esb0RBQW9FO0FBQ3BFLGlDQUFnQztBQUVoQyxtQ0FBb0Q7QUFDcEQsMkNBQXdDO0FBZ0J4QyxTQUFnQixrQkFBa0I7SUFDaEMsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFBLHFCQUFTLEdBQUUsQ0FBQztJQUU3RCxNQUFNLEtBQUssR0FBRyxJQUFBLGVBQU8sRUFBOEIsR0FBRyxFQUFFO1FBQ3RELElBQUk7WUFDRixJQUNFLE1BQU0sS0FBSyxvQkFBWSxDQUFDLGdCQUFnQjtnQkFDeEMsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDO2dCQUNsQixxQkFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLEVBQzVDO2dCQUNBLE1BQU0sRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFFekQsT0FBTztvQkFDTCxPQUFPO29CQUNQLFlBQVksRUFBRSxZQUF5QjtvQkFDdkMsYUFBYSxFQUFFLFlBQXlCO29CQUN4QyxNQUFNO29CQUNOLElBQUksRUFBRSxDQUFDLEVBQW1CLEVBQUUsRUFBRTt3QkFDNUIsT0FBTyxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQztvQkFDcEMsQ0FBQztvQkFDRCxJQUFJLEVBQUUsQ0FBQyxFQUFtQixFQUFFLEVBQUU7d0JBQzVCLE9BQU8sSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLFlBQVksRUFBRSxDQUFDLENBQUM7b0JBQ3BDLENBQUM7b0JBQ0QsYUFBYSxFQUNYLFdBQVcsS0FBSyxtQkFBVyxDQUFDLFdBQVc7d0JBQ3ZDLFdBQVcsS0FBSyxtQkFBVyxDQUFDLGdCQUFnQjt3QkFDNUMsV0FBVyxLQUFLLG1CQUFXLENBQUMsYUFBYTtvQkFDM0MsYUFBYSxFQUFFLFdBQVcsS0FBSyxtQkFBVyxDQUFDLGdCQUFnQjtvQkFDM0QsV0FBVztpQkFDWixDQUFDO2FBQ0g7aUJBQU07Z0JBQ0wsT0FBTyxTQUFTLENBQUM7YUFDbEI7U0FDRjtRQUFDLFdBQU07WUFDTixPQUFPLFNBQVMsQ0FBQztTQUNsQjtJQUNILENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBRTNDLE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQztBQXZDRCxnREF1Q0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXR3b3JrSW5mbywgU2lnblJlc3VsdCB9IGZyb20gJ0B0ZXJyYS1kZXYvd2FsbGV0LXR5cGVzJztcbmltcG9ydCB7IEFjY0FkZHJlc3MsIENyZWF0ZVR4T3B0aW9ucyB9IGZyb20gJ0B0ZXJyYS1tb25leS90ZXJyYS5qcyc7XG5pbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgVHhSZXN1bHQgfSBmcm9tICcuL3R4JztcbmltcG9ydCB7IENvbm5lY3RUeXBlLCBXYWxsZXRTdGF0dXMgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IHVzZVdhbGxldCB9IGZyb20gJy4vdXNlV2FsbGV0JztcblxudHlwZSBIdW1hbkFkZHIgPSBzdHJpbmcgJiB7IF9fdHlwZTogJ0h1bWFuQWRkcicgfTtcblxuZXhwb3J0IGludGVyZmFjZSBDb25uZWN0ZWRXYWxsZXQge1xuICBuZXR3b3JrOiBOZXR3b3JrSW5mbztcbiAgdGVycmFBZGRyZXNzOiBIdW1hbkFkZHI7XG4gIHdhbGxldEFkZHJlc3M6IEh1bWFuQWRkcjtcbiAgZGVzaWduPzogc3RyaW5nO1xuICBwb3N0OiAodHg6IENyZWF0ZVR4T3B0aW9ucykgPT4gUHJvbWlzZTxUeFJlc3VsdD47XG4gIHNpZ246ICh0eDogQ3JlYXRlVHhPcHRpb25zKSA9PiBQcm9taXNlPFNpZ25SZXN1bHQ+O1xuICBhdmFpbGFibGVQb3N0OiBib29sZWFuO1xuICBhdmFpbGFibGVTaWduOiBib29sZWFuO1xuICBjb25uZWN0VHlwZTogQ29ubmVjdFR5cGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VDb25uZWN0ZWRXYWxsZXQoKTogQ29ubmVjdGVkV2FsbGV0IHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgeyBzdGF0dXMsIG5ldHdvcmssIHdhbGxldHMsIHBvc3QsIHNpZ24gfSA9IHVzZVdhbGxldCgpO1xuXG4gIGNvbnN0IHZhbHVlID0gdXNlTWVtbzxDb25uZWN0ZWRXYWxsZXQgfCB1bmRlZmluZWQ+KCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKFxuICAgICAgICBzdGF0dXMgPT09IFdhbGxldFN0YXR1cy5XQUxMRVRfQ09OTkVDVEVEICYmXG4gICAgICAgIHdhbGxldHMubGVuZ3RoID4gMCAmJlxuICAgICAgICBBY2NBZGRyZXNzLnZhbGlkYXRlKHdhbGxldHNbMF0udGVycmFBZGRyZXNzKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHsgdGVycmFBZGRyZXNzLCBjb25uZWN0VHlwZSwgZGVzaWduIH0gPSB3YWxsZXRzWzBdO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbmV0d29yayxcbiAgICAgICAgICB0ZXJyYUFkZHJlc3M6IHRlcnJhQWRkcmVzcyBhcyBIdW1hbkFkZHIsXG4gICAgICAgICAgd2FsbGV0QWRkcmVzczogdGVycmFBZGRyZXNzIGFzIEh1bWFuQWRkcixcbiAgICAgICAgICBkZXNpZ24sXG4gICAgICAgICAgcG9zdDogKHR4OiBDcmVhdGVUeE9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBwb3N0KHR4LCB7IHRlcnJhQWRkcmVzcyB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpZ246ICh0eDogQ3JlYXRlVHhPcHRpb25zKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gc2lnbih0eCwgeyB0ZXJyYUFkZHJlc3MgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhdmFpbGFibGVQb3N0OlxuICAgICAgICAgICAgY29ubmVjdFR5cGUgPT09IENvbm5lY3RUeXBlLldFQl9DT05ORUNUIHx8XG4gICAgICAgICAgICBjb25uZWN0VHlwZSA9PT0gQ29ubmVjdFR5cGUuQ0hST01FX0VYVEVOU0lPTiB8fFxuICAgICAgICAgICAgY29ubmVjdFR5cGUgPT09IENvbm5lY3RUeXBlLldBTExFVENPTk5FQ1QsXG4gICAgICAgICAgYXZhaWxhYmxlU2lnbjogY29ubmVjdFR5cGUgPT09IENvbm5lY3RUeXBlLkNIUk9NRV9FWFRFTlNJT04sXG4gICAgICAgICAgY29ubmVjdFR5cGUsXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH0sIFtuZXR3b3JrLCBwb3N0LCBzaWduLCBzdGF0dXMsIHdhbGxldHNdKTtcblxuICByZXR1cm4gdmFsdWU7XG59XG4iXX0=