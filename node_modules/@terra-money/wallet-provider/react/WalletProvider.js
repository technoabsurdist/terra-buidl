import { jsx as _jsx } from "react/jsx-runtime";
import { WalletContext, WalletStatus, } from '@terra-dev/use-wallet';
import { useEffect, useMemo, useState } from 'react';
import { WalletController } from '../controller';
const EMPTY_ARRAY = [];
export function WalletProvider({ children, defaultNetwork, walletConnectChainIds, connectorOpts, pushServerOpts, createReadonlyWalletSession, selectChromeExtension, waitingChromeExtensionInstallCheck, dangerously__chromeExtensionCompatibleBrowserCheck, }) {
    const [controller] = useState(() => new WalletController({
        defaultNetwork,
        walletConnectChainIds,
        connectorOpts,
        pushServerOpts,
        createReadonlyWalletSession,
        selectChromeExtension,
        waitingChromeExtensionInstallCheck,
        dangerously__chromeExtensionCompatibleBrowserCheck,
    }));
    const [availableConnectTypes, setAvailableConnectTypes] = useState(() => []);
    const [availableInstallTypes, setAvailableInstallTypes] = useState(() => []);
    const [availableConnections, setAvailableConnections] = useState(() => []);
    const [states, setStates] = useState(() => ({
        status: WalletStatus.INITIALIZING,
        network: defaultNetwork,
    }));
    useEffect(() => {
        const availableConnectTypesSubscription = controller
            .availableConnectTypes()
            .subscribe({
            next: (value) => {
                setAvailableConnectTypes(value);
            },
        });
        const availableInstallTypesSubscription = controller
            .availableInstallTypes()
            .subscribe({
            next: (value) => {
                setAvailableInstallTypes(value);
            },
        });
        const availableConnectionsSubscription = controller
            .availableConnections()
            .subscribe({
            next: (value) => {
                setAvailableConnections(value);
            },
        });
        const statesSubscription = controller.states().subscribe({
            next: (value) => {
                setStates(value);
            },
        });
        return () => {
            availableConnectTypesSubscription.unsubscribe();
            availableInstallTypesSubscription.unsubscribe();
            availableConnectionsSubscription.unsubscribe();
            statesSubscription.unsubscribe();
        };
    }, [controller]);
    const state = useMemo(() => {
        return {
            availableConnectTypes,
            availableInstallTypes,
            availableConnections,
            status: states.status,
            network: states.network,
            wallets: states.status === WalletStatus.WALLET_CONNECTED
                ? states.wallets
                : EMPTY_ARRAY,
            install: controller.install,
            connect: controller.connect,
            connectReadonly: controller.connectReadonly,
            disconnect: controller.disconnect,
            post: controller.post,
            sign: controller.sign,
            recheckStatus: controller.recheckStatus,
            isChromeExtensionCompatibleBrowser: controller.isChromeExtensionCompatibleBrowser,
        };
    }, [
        availableConnectTypes,
        availableInstallTypes,
        availableConnections,
        controller.connect,
        controller.connectReadonly,
        controller.disconnect,
        controller.install,
        controller.post,
        controller.sign,
        controller.recheckStatus,
        controller.isChromeExtensionCompatibleBrowser,
        states,
    ]);
    return (_jsx(WalletContext.Provider, Object.assign({ value: state }, { children: children }), void 0));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiV2FsbGV0UHJvdmlkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvQHRlcnJhLW1vbmV5L3dhbGxldC1wcm92aWRlci9yZWFjdC9XYWxsZXRQcm92aWRlci50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFJTCxhQUFhLEVBR2IsWUFBWSxHQUNiLE1BQU0sdUJBQXVCLENBQUM7QUFDL0IsT0FBYyxFQUFhLFNBQVMsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sT0FBTyxDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBMkIsTUFBTSxlQUFlLENBQUM7QUFNMUUsTUFBTSxXQUFXLEdBQWlCLEVBQUUsQ0FBQztBQUVyQyxNQUFNLFVBQVUsY0FBYyxDQUFDLEVBQzdCLFFBQVEsRUFDUixjQUFjLEVBQ2QscUJBQXFCLEVBQ3JCLGFBQWEsRUFDYixjQUFjLEVBQ2QsMkJBQTJCLEVBQzNCLHFCQUFxQixFQUNyQixrQ0FBa0MsRUFDbEMsa0RBQWtELEdBQzlCO0lBQ3BCLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxRQUFRLENBQzNCLEdBQUcsRUFBRSxDQUNILElBQUksZ0JBQWdCLENBQUM7UUFDbkIsY0FBYztRQUNkLHFCQUFxQjtRQUNyQixhQUFhO1FBQ2IsY0FBYztRQUNkLDJCQUEyQjtRQUMzQixxQkFBcUI7UUFDckIsa0NBQWtDO1FBQ2xDLGtEQUFrRDtLQUNuRCxDQUFDLENBQ0wsQ0FBQztJQUVGLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRSx3QkFBd0IsQ0FBQyxHQUFHLFFBQVEsQ0FFaEUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFFWixNQUFNLENBQUMscUJBQXFCLEVBQUUsd0JBQXdCLENBQUMsR0FBRyxRQUFRLENBRWhFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBRVosTUFBTSxDQUFDLG9CQUFvQixFQUFFLHVCQUF1QixDQUFDLEdBQUcsUUFBUSxD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T0FBTyxDQUNMLEtBQUMsYUFBYSxDQUFDLFFBQVEsa0JBQUMsS0FBSyxFQUFFLEtBQUssZ0JBQUcsUUFBUSxZQUEwQixDQUMxRSxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbm5lY3Rpb24sXG4gIENvbm5lY3RUeXBlLFxuICBXYWxsZXQsXG4gIFdhbGxldENvbnRleHQsXG4gIFdhbGxldEluZm8sXG4gIFdhbGxldFN0YXRlcyxcbiAgV2FsbGV0U3RhdHVzLFxufSBmcm9tICdAdGVycmEtZGV2L3VzZS13YWxsZXQnO1xuaW1wb3J0IFJlYWN0LCB7IFJlYWN0Tm9kZSwgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFdhbGxldENvbnRyb2xsZXIsIFdhbGxldENvbnRyb2xsZXJPcHRpb25zIH0gZnJvbSAnLi4vY29udHJvbGxlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2FsbGV0UHJvdmlkZXJQcm9wcyBleHRlbmRzIFdhbGxldENvbnRyb2xsZXJPcHRpb25zIHtcbiAgY2hpbGRyZW46IFJlYWN0Tm9kZTtcbn1cblxuY29uc3QgRU1QVFlfQVJSQVk6IFdhbGxldEluZm9bXSA9IFtdO1xuXG5leHBvcnQgZnVuY3Rpb24gV2FsbGV0UHJvdmlkZXIoe1xuICBjaGlsZHJlbixcbiAgZGVmYXVsdE5ldHdvcmssXG4gIHdhbGxldENvbm5lY3RDaGFpbklkcyxcbiAgY29ubmVjdG9yT3B0cyxcbiAgcHVzaFNlcnZlck9wdHMsXG4gIGNyZWF0ZVJlYWRvbmx5V2FsbGV0U2Vzc2lvbixcbiAgc2VsZWN0Q2hyb21lRXh0ZW5zaW9uLFxuICB3YWl0aW5nQ2hyb21lRXh0ZW5zaW9uSW5zdGFsbENoZWNrLFxuICBkYW5nZXJvdXNseV9fY2hyb21lRXh0ZW5zaW9uQ29tcGF0aWJsZUJyb3dzZXJDaGVjayxcbn06IFdhbGxldFByb3ZpZGVyUHJvcHMpIHtcbiAgY29uc3QgW2NvbnRyb2xsZXJdID0gdXNlU3RhdGU8V2FsbGV0Q29udHJvbGxlcj4oXG4gICAgKCkgPT5cbiAgICAgIG5ldyBXYWxsZXRDb250cm9sbGVyKHtcbiAgICAgICAgZGVmYXVsdE5ldHdvcmssXG4gICAgICAgIHdhbGxldENvbm5lY3RDaGFpbklkcyxcbiAgICAgICAgY29ubmVjdG9yT3B0cyxcbiAgICAgICAgcHVzaFNlcnZlck9wdHMsXG4gICAgICAgIGNyZWF0ZVJlYWRvbmx5V2FsbGV0U2Vzc2lvbixcbiAgICAgICAgc2VsZWN0Q2hyb21lRXh0ZW5zaW9uLFxuICAgICAgICB3YWl0aW5nQ2hyb21lRXh0ZW5zaW9uSW5zdGFsbENoZWNrLFxuICAgICAgICBkYW5nZXJvdXNseV9fY2hyb21lRXh0ZW5zaW9uQ29tcGF0aWJsZUJyb3dzZXJDaGVjayxcbiAgICAgIH0pLFxuICApO1xuXG4gIGNvbnN0IFthdmFpbGFibGVDb25uZWN0VHlwZXMsIHNldEF2YWlsYWJsZUNvbm5lY3RUeXBlc10gPSB1c2VTdGF0ZTxcbiAgICBDb25uZWN0VHlwZVtdXG4gID4oKCkgPT4gW10pO1xuXG4gIGNvbnN0IFthdmFpbGFibGVJbnN0YWxsVHlwZXMsIHNldEF2YWlsYWJsZUluc3RhbGxUeXBlc10gPSB1c2VTdGF0ZTxcbiAgICBDb25uZWN0VHlwZVtdXG4gID4oKCkgPT4gW10pO1xuXG4gIGNvbnN0IFthdmFpbGFibGVDb25uZWN0aW9ucywgc2V0QXZhaWxhYmxlQ29ubmVjdGlvbnNdID0gdXNlU3RhdGU8XG4gICAgQ29ubmVjdGlvbltdXG4gID4oKCkgPT4gW10pO1xuXG4gIGNvbnN0IFtzdGF0ZXMsIHNldFN0YXRlc10gPSB1c2VTdGF0ZTxXYWxsZXRTdGF0ZXM+KCgpID0+ICh7XG4gICAgc3RhdHVzOiBXYWxsZXRTdGF0dXMuSU5JVElBTElaSU5HLFxuICAgIG5ldHdvcms6IGRlZmF1bHROZXR3b3JrLFxuICB9KSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBhdmFpbGFibGVDb25uZWN0VHlwZXNTdWJzY3JpcHRpb24gPSBjb250cm9sbGVyXG4gICAgICAuYXZhaWxhYmxlQ29ubmVjdFR5cGVzKClcbiAgICAgIC5zdWJzY3JpYmUoe1xuICAgICAgICBuZXh0OiAodmFsdWUpID0+IHtcbiAgICAgICAgICBzZXRBdmFpbGFibGVDb25uZWN0VHlwZXModmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICBjb25zdCBhdmFpbGFibGVJbnN0YWxsVHlwZXNTdWJzY3JpcHRpb24gPSBjb250cm9sbGVyXG4gICAgICAuYXZhaWxhYmxlSW5zdGFsbFR5cGVzKClcbiAgICAgIC5zdWJzY3JpYmUoe1xuICAgICAgICBuZXh0OiAodmFsdWUpID0+IHtcbiAgICAgICAgICBzZXRBdmFpbGFibGVJbnN0YWxsVHlwZXModmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICBjb25zdCBhdmFpbGFibGVDb25uZWN0aW9uc1N1YnNjcmlwdGlvbiA9IGNvbnRyb2xsZXJcbiAgICAgIC5hdmFpbGFibGVDb25uZWN0aW9ucygpXG4gICAgICAuc3Vic2NyaWJlKHtcbiAgICAgICAgbmV4dDogKHZhbHVlKSA9PiB7XG4gICAgICAgICAgc2V0QXZhaWxhYmxlQ29ubmVjdGlvbnModmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICBjb25zdCBzdGF0ZXNTdWJzY3JpcHRpb24gPSBjb250cm9sbGVyLnN0YXRlcygpLnN1YnNjcmliZSh7XG4gICAgICBuZXh0OiAodmFsdWUpID0+IHtcbiAgICAgICAgc2V0U3RhdGVzKHZhbHVlKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgYXZhaWxhYmxlQ29ubmVjdFR5cGVzU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICBhdmFpbGFibGVJbnN0YWxsVHlwZXNTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgIGF2YWlsYWJsZUNvbm5lY3Rpb25zU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICBzdGF0ZXNTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICB9LCBbY29udHJvbGxlcl0pO1xuXG4gIGNvbnN0IHN0YXRlID0gdXNlTWVtbzxXYWxsZXQ+KCgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgYXZhaWxhYmxlQ29ubmVjdFR5cGVzLFxuICAgICAgYXZhaWxhYmxlSW5zdGFsbFR5cGVzLFxuICAgICAgYXZhaWxhYmxlQ29ubmVjdGlvbnMsXG4gICAgICBzdGF0dXM6IHN0YXRlcy5zdGF0dXMsXG4gICAgICBuZXR3b3JrOiBzdGF0ZXMubmV0d29yayxcbiAgICAgIHdhbGxldHM6XG4gICAgICAgIHN0YXRlcy5zdGF0dXMgPT09IFdhbGxldFN0YXR1cy5XQUxMRVRfQ09OTkVDVEVEXG4gICAgICAgICAgPyBzdGF0ZXMud2FsbGV0c1xuICAgICAgICAgIDogRU1QVFlfQVJSQVksXG4gICAgICBpbnN0YWxsOiBjb250cm9sbGVyLmluc3RhbGwsXG4gICAgICBjb25uZWN0OiBjb250cm9sbGVyLmNvbm5lY3QsXG4gICAgICBjb25uZWN0UmVhZG9ubHk6IGNvbnRyb2xsZXIuY29ubmVjdFJlYWRvbmx5LFxuICAgICAgZGlzY29ubmVjdDogY29udHJvbGxlci5kaXNjb25uZWN0LFxuICAgICAgcG9zdDogY29udHJvbGxlci5wb3N0LFxuICAgICAgc2lnbjogY29udHJvbGxlci5zaWduLFxuICAgICAgcmVjaGVja1N0YXR1czogY29udHJvbGxlci5yZWNoZWNrU3RhdHVzLFxuICAgICAgaXNDaHJvbWVFeHRlbnNpb25Db21wYXRpYmxlQnJvd3NlcjpcbiAgICAgICAgY29udHJvbGxlci5pc0Nocm9tZUV4dGVuc2lvbkNvbXBhdGlibGVCcm93c2VyLFxuICAgIH07XG4gIH0sIFtcbiAgICBhdmFpbGFibGVDb25uZWN0VHlwZXMsXG4gICAgYXZhaWxhYmxlSW5zdGFsbFR5cGVzLFxuICAgIGF2YWlsYWJsZUNvbm5lY3Rpb25zLFxuICAgIGNvbnRyb2xsZXIuY29ubmVjdCxcbiAgICBjb250cm9sbGVyLmNvbm5lY3RSZWFkb25seSxcbiAgICBjb250cm9sbGVyLmRpc2Nvbm5lY3QsXG4gICAgY29udHJvbGxlci5pbnN0YWxsLFxuICAgIGNvbnRyb2xsZXIucG9zdCxcbiAgICBjb250cm9sbGVyLnNpZ24sXG4gICAgY29udHJvbGxlci5yZWNoZWNrU3RhdHVzLFxuICAgIGNvbnRyb2xsZXIuaXNDaHJvbWVFeHRlbnNpb25Db21wYXRpYmxlQnJvd3NlcixcbiAgICBzdGF0ZXMsXG4gIF0pO1xuXG4gIHJldHVybiAoXG4gICAgPFdhbGxldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3N0YXRlfT57Y2hpbGRyZW59PC9XYWxsZXRDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufVxuIl19