import { ConnectType } from '@terra-dev/use-wallet';
const interval = 500;
export async function checkAvailableExtension(timeout, isChromeExtensionCompatibleBrowser) {
    return new Promise((resolve) => {
        if (isChromeExtensionCompatibleBrowser) {
            resolve(ConnectType.CHROME_EXTENSION);
            return;
        }
        const start = Date.now();
        function check() {
            const meta = window.document.querySelector('head > meta[name="terra-web-connect"]');
            if (typeof (meta === null || meta === void 0 ? void 0 : meta.getAttribute('connected')) === 'string') {
                resolve(ConnectType.WEB_CONNECT);
            }
            else if (window['isTerraExtensionAvailable'] === true) {
                resolve(ConnectType.CHROME_EXTENSION);
            }
            else if (Date.now() > start + timeout) {
                resolve(null);
            }
            else {
                setTimeout(check, interval);
            }
        }
        setTimeout(check, interval);
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hlY2tBdmFpbGFibGVFeHRlbnNpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvQHRlcnJhLW1vbmV5L3dhbGxldC1wcm92aWRlci91dGlscy9jaGVja0F2YWlsYWJsZUV4dGVuc2lvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFFcEQsTUFBTSxRQUFRLEdBQUcsR0FBRyxDQUFDO0FBRXJCLE1BQU0sQ0FBQyxLQUFLLFVBQVUsdUJBQXVCLENBQzNDLE9BQWUsRUFDZixrQ0FBMkM7SUFFM0MsT0FBTyxJQUFJLE9BQU8sQ0FFaEIsQ0FBQyxPQUFPLEVBQUUsRUFBRTtRQUNaLElBQUksa0NBQWtDLEVBQUU7WUFDdEMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBQ3RDLE9BQU87U0FDUjtRQUVELE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUV6QixTQUFTLEtBQUs7WUFDWixNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FDeEMsdUNBQXVDLENBQ3hDLENBQUM7WUFFRixJQUFJLE9BQU8sQ0FBQSxJQUFJLGFBQUosSUFBSSx1QkFBSixJQUFJLENBQUUsWUFBWSxDQUFDLFdBQVcsQ0FBQyxDQUFBLEtBQUssUUFBUSxFQUFFO2dCQUN2RCxPQUFPLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDO2FBQ2xDO2lCQUFNLElBQUksTUFBTSxDQUFDLDJCQUEyQixDQUFDLEtBQUssSUFBSSxFQUFFO2dCQUN2RCxPQUFPLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDLENBQUM7YUFDdkM7aUJBQU0sSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsS0FBSyxHQUFHLE9BQU8sRUFBRTtnQkFDdkMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ2Y7aUJBQU07Z0JBQ0wsVUFBVSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQzthQUM3QjtRQUNILENBQUM7UUFFRCxVQUFVLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzlCLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbm5lY3RUeXBlIH0gZnJvbSAnQHRlcnJhLWRldi91c2Utd2FsbGV0JztcblxuY29uc3QgaW50ZXJ2YWwgPSA1MDA7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0F2YWlsYWJsZUV4dGVuc2lvbihcbiAgdGltZW91dDogbnVtYmVyLFxuICBpc0Nocm9tZUV4dGVuc2lvbkNvbXBhdGlibGVCcm93c2VyOiBib29sZWFuLFxuKTogUHJvbWlzZTxDb25uZWN0VHlwZS5DSFJPTUVfRVhURU5TSU9OIHwgQ29ubmVjdFR5cGUuV0VCX0NPTk5FQ1QgfCBudWxsPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZTxcbiAgICBDb25uZWN0VHlwZS5DSFJPTUVfRVhURU5TSU9OIHwgQ29ubmVjdFR5cGUuV0VCX0NPTk5FQ1QgfCBudWxsXG4gID4oKHJlc29sdmUpID0+IHtcbiAgICBpZiAoaXNDaHJvbWVFeHRlbnNpb25Db21wYXRpYmxlQnJvd3Nlcikge1xuICAgICAgcmVzb2x2ZShDb25uZWN0VHlwZS5DSFJPTUVfRVhURU5TSU9OKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG5cbiAgICBmdW5jdGlvbiBjaGVjaygpIHtcbiAgICAgIGNvbnN0IG1ldGEgPSB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgJ2hlYWQgPiBtZXRhW25hbWU9XCJ0ZXJyYS13ZWItY29ubmVjdFwiXScsXG4gICAgICApO1xuXG4gICAgICBpZiAodHlwZW9mIG1ldGE/LmdldEF0dHJpYnV0ZSgnY29ubmVjdGVkJykgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJlc29sdmUoQ29ubmVjdFR5cGUuV0VCX0NPTk5FQ1QpO1xuICAgICAgfSBlbHNlIGlmICh3aW5kb3dbJ2lzVGVycmFFeHRlbnNpb25BdmFpbGFibGUnXSA9PT0gdHJ1ZSkge1xuICAgICAgICByZXNvbHZlKENvbm5lY3RUeXBlLkNIUk9NRV9FWFRFTlNJT04pO1xuICAgICAgfSBlbHNlIGlmIChEYXRlLm5vdygpID4gc3RhcnQgKyB0aW1lb3V0KSB7XG4gICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRUaW1lb3V0KGNoZWNrLCBpbnRlcnZhbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2V0VGltZW91dChjaGVjaywgaW50ZXJ2YWwpO1xuICB9KTtcbn1cbiJdfQ==